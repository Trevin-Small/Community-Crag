<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Crag | Delete Old Posts</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/logo.svg" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/bootstrap-styles.css" rel="stylesheet" />
        <link href="css/background.css" rel="stylesheet" />
        <link href="css/buttons.css" rel="stylesheet" />
        <link href="css/auth.css" rel="stylesheet" />
        <script src="./csi.js"></script>
        <script src="https://communitycrag.com/bundle.js"></script>
    </head>
    <body class="background">
        <!-- Responsive navbar-->
        <nav class="navbar" style="position:sticky; flex: 0 1 auto;">
            <div data-include="./navbar.html" id="navbar"></div>
        </nav>
        <!-- Page content-->
        <div class="scroll" id="scroll">
            <div class="auth-container">
                <div class="contents">
                    <h3>Delete Old Posts</h3>
                    <hr>
                    <div class="error-message" id="error-message" style="display:none;"></div>
                    <div class="info-message" id="info-message" style="display:none;"></div>
                    <form class="auth-form" autocomplete="off" onsubmit="event.preventDefault();">
                        <div style="margin:0.25rem;"></div>
                        <b>Enter Cutoff Date:</b>
                        <input class="text-input" type="text" id="date" name="date" placeholder="mm/dd/yy">
                        <div style="margin:0.5rem;"></div>
                        <p style="text-align:center;">Submission will PERMANENTLY delete all posts older than the entered date.</p>
                        <div style="margin:0.25rem;"></div>
                        <button class="btn submit-auth" type="submit" id="submit-reset" onclick="communityCrag.deleteByDate();">Delete Old Posts</button>
                        <div style="margin:0.75rem;"></div>
                    </form>
                </div>
            </div>
            <div data-include="./footer.html"></div>
            <div data-include="./spacer.html"></div>
        </div>
        <script>
            window.onload = async function() {
                const isAdminVal = await communityCrag.isAdmin();
                if (!isAdminVal) {
                    window.location.href = "https://communitycrag.com";
                }
            };
            window.addEventListener('beforeunload', function(e) {
                communityCrag.updatePreviousURL(window.location.href);
            });
        </script>
    </body>
</html>
